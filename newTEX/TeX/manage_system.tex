\section{Разработка алгоритма управления системой}

Для работы системы управления прецизионным столом необходимо разработать алгоритм управления системой. Разработанная блок-схема программы микроконтроллера представлена на рисунках \ref{pic:sh_mk} и \ref{pic:sh_prog}.

\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.3\textwidth]{images/sh_mk} 
	\caption{Блок-схема основной программы микроконтроллера}
	\label{pic:sh_mk}
\end{figure}

Микроконтроллер начинает свою работу с запуска аналого-цифрового преобразователя (АЦП) и цифро-аналогового преобразователя (ЦАП). Потом происходит инициализация портов (входов/выходов устройства) и их дальнейшая конфигурация. Затем разрешаются прерывания (приходит в работу программа прерываний микроконтроллера).
\newpage

\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.25\textwidth]{images/sh_prog} 
	\caption{Блок-схема основной программы микроконтроллера}
	\label{pic:sh_prog}
\end{figure}

Через USB порт поступает число, на величину которого нужно совершить перемещение двигателем, далее идет вычисление ошибки от уже имеющегося положения двигателя, чтобы установить на сколько нужно повернуть ротор. Затем вычисляется вектор управления и формируется выходное напряжение, которое подается на выходе микроконтроллера.
