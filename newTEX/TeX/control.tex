\section{Статический расчет и выбор элементов}
\subsection{Оптический расчет устройства}
Оптическая схема разрабатываемого устройства со всеми необходимыми обозначениями представлена на рисунке \ref{opt_shem}. 
\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.9\textwidth]{opt_shem} 
	\caption{Оптическая схема устройства: 1 – отражатель в исходном состоянии, 2 – падающий луч, 3 – отражатель в конечном состоянии, 4 – фотоприемное устройство, 5 – отраженный луч в конечном состоянии отражателя, 6 – отраженный луч в исходном состоянии отражателя, $\alpha$ – угол падения луча в исходном состоянии отражателя, $\beta$ – угол падения луча в конечном состоянии отражателя, $\phi$ – угол поворота отражателя}
	\label{opt_shem}
\end{figure}

Подберем размеры системы так, чтобы отраженный луч в исходном состоянии падал в центр фотоприемника. Тогда угловое перемещение отражателя можно будет связать со смещением отраженного луча относительно центра фотоприемника. \par
При вращении зеркала в вертикальной плоскости отраженный луч будет перемещаться не по прямой, а по образующей конуса $b$ с осью вращения  $a$ показанной на рисунке \ref{train2}\par
Так как по техническому заданию диапазон измеряемых величин устройства должен быть $\pm 1$ градус, то можно считать, что отраженный луч будет перемещаться не по образующей конуса, а по прямой из этого следует, что мы будем рассматривать в дальнейшем не радиус конуса, а прямую $x$ \par
Из рисунка \ref{opt_shem} видно, что:
\begin{gather}
	\phi+\beta=\alpha\\
	\alpha-\beta+\phi=2\phi
\end{gather}\par
Это значит, что $\arctan \frac{x}{L} = 2 \phi$\par
где, L - это проекция на плоскость ФПУ.\par
На рисунке \ref{train2}  изображена зависимость L от высоты заркала и угла падения луча излучающего устройства.

\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.6\textwidth]{train2} 
	\caption{Оптическая схема устройства }
	\label{train2}
\end{figure}

Из рисунка \ref{train2} следует, что:
\begin{gather}
	L=\tan \gamma \cdot a
\end{gather}\par
Подставим все нужные значения и выразим угол $\phi$.
\begin{gather}
	\phi =  \frac {\arctan \frac{x}{\tan \gamma \cdot a}}{2}
\end{gather}\par

\subsection{Выбор фотоприемного устройства}
В качестве приемника выбран оптический координатночувствительный приемник iC-ODL фирмы iC HAUS, описание которого приведено в приложении Д.\par
Непосредственно приемником излучения является фотодиод с двумя токовыми контактами. В зависимости от положения светового пятна токи, снимаемые с этих контактов, IAC1 и IAC2 меняются, причем зависимость токов от координаты линейна. Для дальнейших преобразований удобней использовать не токи, а напряжения, снимаемые с внешних резисторов, UAC1 и UAC2. Далее эти напряжения должны поступать на дифференциальный усилитель, с которого снимается результирующее напряжение  UX= UAC1 - UAC2, равное нулю при нахождении светового пятна в центре фотодиода. Координату смещения светового пятна можно рассчитать, воспользовавшись следующей формулой:\par
\begin{gather}
	\frac{U_{AC2}-U_{AC1}}{U_{AC2}+U_{AC1}}=\frac{U_x}{U_{AC2}+U_{AC1}}=\frac{2x}{D_x}
\end{gather}\par
где $D_x$ - эффективная площадь фотоприемника(8.3 мм),x - координата смещения светового пятна, $U_{AC1}$ - напряжение, снимаемое с выхода 1, $U_{AC1}$ - напряжение, снимаемое с выхода 2, $U_x$ – разность напряжений $U_{AC1}$ и $U_{AC1}$.\par
Получим выражение для координаты смещения:
\begin{gather}
	x=\frac{D_x \cdot U_x}{2(U_{AC2}+U_{AC1})},
\end{gather}\par
Если для удобства использовать не абсолютные значения напряжения, а относительные по отношению к максимально возможному напряжению выхода, ($U_{R1}=\frac{U_{AC1}}{U_{max}}$, $U_{R2}=\frac{U_{AC2}}{U_{max}}$, $U_{Rx}=\frac{U_x}{U_{max}}$, где $U_{max}=I_{max}\cdot R_1 =5$B) то в этом случае формулу для координаты $x$ можно рассмотреть с этой стороны.
\begin{gather}
	x = \frac{D_x \cdot U_{Rx}}{2}= \frac{D_x \cdot U_x}{2 \cdot U_{max}}
\end{gather}

\subsection{Выбор дифференциального усилителя напряжения}
В качестве дифференциального усилителя напряжения выбран операционный усилитель AD711, подробные данные о котором представлены в приложении Е.\par
Усилитель необходим для получения разности напряжений UAC2 и UAC1, то есть Ux, и его усиления или ослабления для дальнейшей подачи на АЦП. Для этого используется дифференциальная схема включения операционного усилителя, изображенная на рисунке \ref{dy}.

\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.35\textwidth]{dy} 
	\caption{Дифференциальная схема включения операционного усилителя}
	\label{dy}
\end{figure}


В случае выполнения равенств $R_1=R_2$ и $R_3=R_4$ выходное напряжение имеет следующий вид:
\begin{gather}
	U_{\text{вых}}=U_x\frac{R_3}{R_1}
\end{gather}   
Максимальное входное напряжение на выбранном АЦП составляет 4 В, максимальное $U_x$ – 5 В, следовательно должны быть выбраны следующие значения сопротивлений резисторов: $R_1=R_2=40$ кОм, $R_3=R_4=50$ кОм. Тогда выходное напряжение ОУ
\begin{gather}
	U_{\text{вых}}=0.8\cdot U_x
\end{gather}
\subsection{Выбор микроконтроллера}
Для реализации автомобильного вольтметра выбран микроконтроллер ATTINY2313-20SI фирмы Atmel.\par
- Количество входов/выходов: 18 I/O\par
- Тип ОЗУ данных: SRAM\par
- Размер ПЗУ данных: 128 B\par
- Тип ПЗУ данных: EEPROM\par
- Рабочее напряжение питания: от 2.7 В до 5.5 В\par
- Максимальная тактовая частота: 20 мГц\par
Архитектура микроконтроллера ATTINY2313-20SI фирмы Atmel и расположение его пинов представлена на рисунках \ref{block_sh} и \ref{pin_sh}.

\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.7\textwidth]{block_sh} 
	\caption{Блок-схема микроконтроллера ATTINY2313-20SI}
	\label{block_sh}
\end{figure}
\newpage
\begin{figure}[ht!]
	\centering
	\includegraphics[width = 0.7\textwidth]{pin_sh} 
	\caption{Схема расположения пинов на микроконтроллере}
	\label{pin_sh}
\end{figure}

С помощью пинов AIN0 и AIN1 реализован АЦП с RC-цепью. AIN0 - прямой, AIN1 - инверсный. На эти два входа подается напряжение и если напряжение на входе AIN0 больше чем на AIN1 микроконтроллер выдает на выходе 1, иначе 0 (выходом служит флаг регистра компаратора).

\subsection{Выбор преобразователя напряжения}
Исходя из технического задания, напряжение питания переменное и составляется 220 В с частотой 50 Гц, преобразователь напряжения можно сделать с помощью трансформатора и диодного моста. Так как требуемое напряжение фотоприемного устройства 4.5 - 13.2 В. Выбирается нужный понимающий напряжение трансформатор и диоды для диодного моста.

\subsection{Выбор преобразователь интерфейса}
В интерфейсе RS-232 в качестве логической 1 выступает диапазон напряжений от -3 до -15 В, а логическому 0 — от +3 до +15 В, что не соответствует уровням логических нулей и единиц, принятых для семейства микроконтроллеров Atmel. Поэтому используется преобразователь интерфейса.\par
Для преобразования будем использовать интегральную схему
Max232. На контакт T1in микросхемы подаётся информация с порта после- довательной передачи информации TXD микроконтроллера, значения его напряжений из стандарта ТТЛ переводятся в соответствующие напряжения стандарта RS-232 и с вывода T1out передаются компьютеру по линии связи.\par
Схема вводов/выводов и принципиальная схема приведена в приложении Ж.

\subsection{Выбор блока питания}
По техническому заданию необходимо заданное напряжения сети 220В/50Гц подать на источник питания.\par
Также необходимо учесть, что для питания фотоприемного устройства, усилителя и микроконтроллера требуется напряжение 5 В. Мощность фотоприемного устройства равна 4.75 мВт, мощность усилителя составляет 15 мВт, мощность микроконтроллера – 7.5 мВт. Суммарная мощность равна 32.25 мВт.\par
Также важно помнить, что у источника должен быть порт вывода IEC.\par
Hobart 140CU20 подходит заданным параметрам. Данный источник имеет выходное напряжение 220В переменного тока с частотой 50Гц.\par






